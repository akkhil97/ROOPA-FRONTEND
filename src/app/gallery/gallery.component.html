<section class="gallery" id="gallery">
  <div class="container">
    <div class="gallery-header">
      <h2 class="section-title">üì∏ School Gallery</h2>
      <p class="section-subtitle">Capturing precious moments and memories</p>
    </div>

    <div class="gallery-grid">
      <div *ngFor="let item of galleryItems" class="gallery-item" (click)="openGallery(item)">
        <img [src]="item.image" [alt]="item.title" class="gallery-image">
        <div class="gallery-overlay">
          <h3 class="gallery-title">{{ item.title }}</h3>
          <p class="gallery-posted-date" [ngClass]="{'new-label': formatPostedDate(item.postedDate) === 'NEW'}">
            {{ formatPostedDate(item.postedDate) }}
          </p>
        </div>
      </div>
    </div>

    <!-- Modal Gallery -->

    <div class="modal-fullscreen" *ngIf="showModal" (click)="closeGallery()">
      <div class="modal-gallery-content" (click)="$event.stopPropagation()">
        <h2 class="modal-title">{{ selectedItem?.title }}</h2>

        <div class="modal-gallery-image-container">
          <button class="arrow-button left" (click)="prevImage($event)"><i class="fa-solid fa-backward"></i></button>

          <img [src]="selectedItem?.photos[currentPhotoIndex]" alt="Gallery Photo" class="modal-gallery-image">

          <button class="arrow-button right" (click)="nextImage($event)"><i class="fa-solid fa-forward"></i></button>
        </div>

        <div class="modal-controls">
          <button class="download-button" (click)="downloadImage(selectedItem?.photos[currentPhotoIndex])">‚¨áÔ∏è
            Download</button>
            <button class="modal-close" (click)="closeGallery()">‚úñ Close</button>

          <span class="photo-counter">{{ currentPhotoIndex + 1 }} / {{ selectedItem?.photos.length }}</span>
        </div>
      </div>
    </div>
  </div>
</section>